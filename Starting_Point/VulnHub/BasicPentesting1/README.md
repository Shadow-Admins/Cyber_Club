<H1>Basic Pentesting: 1</H1>
<p></p>
<H2>What is it?</H2>
<p></p>
Basic Pentesting: 1 is a vulnerable VM that can be downloaded from <a href="https://www.vulnhub.com/entry/basic-pentesting-1,216/" rel="nofollow">VulnHub</a> so that you can host it locally. (To learn how to host this VM locally reference <a href="https://github.com/Shadow-Admins/Cyber_Club/tree/main/Starting_Point/VulnHub" rel="nofollow">here</a>)
<p></p>
Basic Pentesting: 1 is an easy to intermediate box, it contains 1 flags (root flag) and has different ways of completing the box to achieve the same outcome. Doing this box you will cover the following areas:
<p></p>

```

<H5>Enumeration</H5>
- Network Scanning (Nmap)
<H5>Web Recon</H5>
- Recon (Nikto,gobuster,dirb,uniscan)
<br>
- Web directory traversal/file access
<H5>Breaking into a badly configured login page</H5>
- Setting up a dictionary file for username and password enumeration/cracking
<br>
- WordPress password cracking (wpscan,hydra)
<H5>Generating Backdoors</H5>
- Generate PHP Backdoor (Msfvenom)
<br>
- Using pre-configured php backdoor
<br>
- Upload and execute a backdoor
<H5>Catching the reverse conection on your host</H5>
- Reverse connection (Metasploit)
<H5>Identifying and cracking a hash</H5>
- Getting a hash and decrypting it
<H5>Getting a TTY shell</H5>
- Import python one-liner for proper TTY shell
<H5>Privilege Escalation</H5>
- One liner, linPEAS, linux-exploit-suggester-2
<br>
- binary, dirtycow

```


<p></p>
All flags have the following flag format:
<p></p>
key-1-of-3.txt
<br>
And when opened look like a random string of characters eg. ABCDENOASFINEAUINFAOPDSNFRUENPANFD
<p></p>
As stated before one flag is located on the website itself, one is located in the user folder and the final is located in the root folder.
<p></p>
I have written this write up as very beginner oriented with step-by-step walkthroughs to each stage of the process have a read you might learn something.
<p></p>
<H2>Walkthrough</H2>
<p></p>
<details>
    <summary></summary>
<p></p>
The first thing we need to do is identify the target VM on our network, (this is the mothod if you followed my guide for hosting the VM <a href="https://github.com/Shadow-Admins/Cyber_Club/tree/main/Starting_Point/VulnHub" rel="nofollow">here</a>)
<p></p>
In order to do that we need to identify what our Attacking VMs network adapter. By using the following command:
<p></p>

```
sudo ifconfig
```

<p></p>
Which outputs:
<p></p>

```
❯ sudo ifconfig
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.191.129  netmask 255.255.255.0  broadcast 192.168.191.255
        inet6 fe80::11ec:b5d:f22:834f  prefixlen 64  scopeid 0x20<link>
        ether 00:0c:29:df:18:d9  txqueuelen 1000  (Ethernet)
        RX packets 27524  bytes 26521537 (25.2 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 17283  bytes 2658776 (2.5 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.125.134  netmask 255.255.255.0  broadcast 192.168.125.255
        inet6 fe80::744b:c7cf:2382:75d3  prefixlen 64  scopeid 0x20<link>
        ether 00:0c:29:df:18:e3  txqueuelen 1000  (Ethernet)
        RX packets 136  bytes 16130 (15.7 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 115  bytes 9578 (9.3 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 43920  bytes 8862323 (8.4 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 43920  bytes 8862323 (8.4 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
```

<p></p>
Here we can see the eth1 adapter, this is the adapter we added to the Host-only network. We will use the ip address given to this adapter to discover the Target VM on our network. We will use the following command:
<p></p>

```
nmap -e eth1 -T5 192.168.125.0/24
```

<p></p>
Looking at this command we used the <kbd>-e</kbd> flag to let nmap know which interface we want to use for the scan, the <kbd>-T5</kbd> flag tells nmap to do the fastest scan possible and the network we scanned against was the network we identified when we ran <kbd>ifconfig</kbd>.
<br>
This command returns:
<p></p>

```
❯ nmap -e eth1 -T5 192.168.125.0/24
Starting Nmap 7.91 ( https://nmap.org ) at 2021-07-11 12:40 AEST
Nmap scan report for 192.168.125.134
Host is up (0.048s latency).
Not shown: 999 closed ports
PORT    STATE SERVICE
111/tcp open  rpcbind

Nmap scan report for 192.168.125.135
Host is up (0.048s latency).
Not shown: 997 closed ports
PORT   STATE SERVICE
21/tcp open  ftp
22/tcp open  ssh
80/tcp open  http

Nmap done: 256 IP addresses (2 hosts up) scanned in 19.50 seconds
```

<p></p>
Looking through the results we can identify our own ip address <kbd>192.168.125.134</kbd> and one other ip <kbd>192.168.125.135</kbd> we can therefore determine that the second ip is our target VM. Time for further enumeration with nmap. This time the command will look like this:
<p></p>

```
sudo nmap -e eth1 -A -vvv --script vuln -oN nmap.txt 192.168.125.135
```

<p></p>
For this command, we use the <kbd>-e</kbd> flag to direct nmap to our desired network interface, <kbd>-A</kbd> to run all scripts, <kbd>-vvv</kbd> to give very verbose output, <kbd>--script vuln</kbd> to run the vulnerability script against the machine, this is extremely helpful and does a lot of enumeration for us which we can see in the output, <kbd>-oN nmap.txt</kbd> outputs the scan to a text file se we can refer to it later and finally the ip address we wish to scan.
This command outputs the following:
<p></p>

```
# Nmap 7.91 scan initiated Sun Jul 11 12:44:35 2021 as: nmap -e eth1 -A -vvv --script vuln -oN nmap.txt 192.168.125.135
Nmap scan report for 192.168.125.135
Host is up, received arp-response (0.0045s latency).
Scanned at 2021-07-11 12:44:45 AEST for 458s
Not shown: 997 closed ports
Reason: 997 resets
PORT   STATE SERVICE REASON         VERSION
21/tcp open  ftp     syn-ack ttl 64 ProFTPD 1.3.3c
|_sslv2-drown: 
22/tcp open  ssh     syn-ack ttl 64 OpenSSH 7.2p2 Ubuntu 4ubuntu2.2 (Ubuntu Linux; protocol 2.0)
80/tcp open  http    syn-ack ttl 64 Apache httpd 2.4.18 ((Ubuntu))
|_http-csrf: Couldn't find any CSRF vulnerabilities.
|_http-dombased-xss: Couldn't find any DOM based XSS.
| http-enum: 
|_  /secret/: Potentially interesting folder
|_http-jsonp-detection: Couldn't find any JSONP endpoints.
|_http-litespeed-sourcecode-download: Request with null byte did not work. This web server might not be vulnerable
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-stored-xss: Couldn't find any stored XSS vulnerabilities.
|_http-wordpress-users: [Error] Wordpress installation was not found. We couldn't find wp-login.php
MAC Address: 00:0C:29:FB:93:05 (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
TCP/IP fingerprint:
OS:SCAN(V=7.91%E=4%D=7/11%OT=21%CT=1%CU=34941%PV=Y%DS=1%DC=D%G=Y%M=000C29%T
OS:M=60EA5CE7%P=x86_64-pc-linux-gnu)SEQ(SP=108%GCD=1%ISR=109%TI=Z%CI=I%II=I
OS:%TS=8)OPS(O1=M5B4ST11NW7%O2=M5B4ST11NW7%O3=M5B4NNT11NW7%O4=M5B4ST11NW7%O
OS:5=M5B4ST11NW7%O6=M5B4ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6
OS:=7120)ECN(R=Y%DF=Y%T=40%W=7210%O=M5B4NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O
OS:%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=
OS:0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%
OS:S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(
OS:R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=
OS:N%T=40%CD=S)

Uptime guess: 161.288 days (since Sun Jan 31 06:58:16 2021)
Network Distance: 1 hop
TCP Sequence Prediction: Difficulty=264 (Good luck!)
IP ID Sequence Generation: All zeros
Service Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel

TRACEROUTE
HOP RTT     ADDRESS
1   4.52 ms 192.168.125.135

Read data files from: /usr/bin/../share/nmap
OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
# Nmap done at Sun Jul 11 12:52:23 2021 -- 1 IP address (1 host up) scanned in 468.00 seconds
```

<p></p>
What can we pull from this scan? We can see there are 3 ports open (port 21 running ftp, port 22 running ssh and port 80 running http) We can also see that the vuln script has enumerated a directory for us '/secret/'.
<p></p>
After doing these kinds of boxes a few times you will know that port 22 is rarely a way into the box so for now we will concentrate on the two other ports (21 and 80).
<p></p>
Prior to looking at these individually I will continue enumeration using some different tools. The first will be uniscan (one of my favourite tools).
<p></p>
Uniscan is a tool that comes prepackaged with both Parrot and kali, it has a simple GUI and is easy to use.
<p></p>
<div align="center">
<img src="https://github.com/Shadow-Admins/Cyber_Club/blob/4196fbf8efbffb56164027ae43bc4d0ca5eae580/Starting_Point/VulnHub/MrRobot/images/uniscanreport.png"><br>
</div>
<p></p>






</details>